// sticky header
$(window).scroll(setScrollHeader);
$(window).on('load', setScrollHeader);

function setScrollHeader() {
  if ($(this).scrollTop() > 50) {
    $('#js-header').addClass("sticky");
  } else {
    $('#js-header').removeClass("sticky");
  }
} // lang switch


const langItem = document.querySelectorAll('#js-lang .item');
langItem.forEach(item => {
  item.addEventListener('click', () => {
    langItem.forEach(i => {
      i.classList.remove('active');
    });
    item.classList.add('active');
    changeLanguage(item.getAttribute('data-lang'));
  });
});

function changeLanguage(lang) {
  localStorage.setItem('steptorussialanguage', lang);
  document.body.className = lang;
}

$(window).ready(() => {
  let lang = localStorage.getItem('steptorussialanguage');
  if (!lang) lang = 'english';
  document.body.className = lang;
  langItem.forEach(item => {
    if (item.getAttribute('data-lang') == lang) {
      item.classList.add('active');
    } else {
      item.classList.remove('active');
    }
  });
}); //set menu text onclick

const menuItems = document.querySelectorAll('.js-handle-menu a'); // const menuHead = document.querySelector('.js-handle-menu-header');

menuItems.forEach(item => {
  item.addEventListener('click', e => {
    console.log(window.innerWidth);
    menuItems.forEach(i => {
      i.classList.remove('active');
    });
    item.classList.add('active'); // menuHead.innerHTML = item.innerHTML;   
  });
}); // scroll to link

$(document).on('click', 'a.js-link', scrollToLink);

function scrollToLink() {
  $('.js-handle-menu').removeClass('show');
  $("html, body").animate({
    scrollTop: $($(this).attr("href")).offset().top + "px"
  }, {
    duration: 400,
    easing: "swing"
  });
  return false;
} // mobile menu


const headerBtn = document.querySelector('.js-header-menu-btn'); // кнопка открытия мобильного меню сбоку 

const headerMenu = document.querySelector('.js-header-menu');
const headerWrapper = document.querySelector('.js-menu-wrapper');
const mobileHeaderLinks = document.querySelectorAll('.js-handle-mobile-menu a');
mobileHeaderLinks.forEach(element => {
  element.addEventListener('click', function () {
    closeMenu();
  });
});
headerBtn.addEventListener('click', function () {
  headerMenu.classList.add('mobile-menu-open');
  headerWrapper.classList.add('show');
  document.body.style.overflow = 'hidden';
});
headerWrapper.addEventListener('click', function () {
  closeMenu();
});

function closeMenu() {
  headerMenu.classList.remove('mobile-menu-open');
  headerWrapper.classList.remove('show');
  document.body.style.overflow = '';
}